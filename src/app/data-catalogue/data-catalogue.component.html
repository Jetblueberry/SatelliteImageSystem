<div class="container-fluid" *ngIf="openCatalogue">
  <div class="container">
    <div class="catalogue-contain">
      <div class="header">
        <div class="data-catalogue-area">
          <button class="data-catalogue-btn">
            <span>Data Catalogue</span>
          </button>
        </div>
        <div class="done-area">
          <button class="done-btn" (click)="closeDataCatalogue()">
            <span>Done</span>
          </button>
        </div>
      </div>
      <div class="body col-md-12">
        <div class="col-md-4" style="background-color: #f3f1f1; border-radius: 0 0 0 5px;">
          <div class="data-catalogue-explorer">
            <div class="input-area">
              <div class="input-block">
                <i class="fa-solid fa-magnifying-glass" style="margin-right: 5px;"></i>
                <input placeholder="Search catalogue" (keyup)="searchData($event)">
              </div>
            </div>
            <div class="folder-area">
              <ul *ngIf="!openSearchList" class="catalog-group">
                <li class="data-catalog-group" >
                  <button type="button" class="catalog-group-btn" (click)="OpenCloseListData('landsat')">
                    <i *ngIf="!displayData['landsat']" class="fa-solid fa-folder-closed"></i>
                    <i *ngIf="displayData['landsat']" class="fa-solid fa-folder-open"></i>
                    <span class="btn-text">Landsat</span>
                    <span class="btn-icon-folder">
                      <i class="fa-solid fa-caret-up" id="landsat-icon"></i>
                    </span>
                  </button>
                  <ul *ngIf="displayData['landsat']" class="catalog-group-datasets">
                    <li *ngFor="let i of this.list_landsat" class="data-catalog-group-datasets" >
                      <button type="button" class="catalog-group-datasets-btn" (click)="selectDataset(i.idData)">
                        <span class="btn-text">{{i.maData}}</span>
                      </button>
                      <span *ngIf="!displayMinusIcon[i.idData]" class="btn-icon" (click)="addDatasetToMap(i.idData)">
                        <i  class="fa-solid fa-circle-plus"></i>
                      </span>
                      <span *ngIf="displayMinusIcon[i.idData]" class="btn-icon" (click)="removeDetails(i.tenData)">
                        <i  class="fa-solid fa-circle-minus" ></i>
                      </span>
                    </li>
                  </ul>
                </li>
                <li class="data-catalog-group">
                  <button type="button" class="catalog-group-btn" (click)="OpenCloseListData('sentinel')">
                    <i *ngIf="!displayData['sentinel']" class="fa-solid fa-folder-closed"></i>
                    <i *ngIf="displayData['sentinel']" class="fa-solid fa-folder-open"></i>
                    <span class="btn-text">Sentinel</span>
                    <span class="btn-icon-folder">
                      <i class="fa-solid fa-caret-up" id="sentinel-icon"></i>
                    </span>
                  </button>
                  <ul *ngIf="displayData['sentinel']" class="catalog-group-datasets">
                    <li *ngFor="let i of this.list_sentinel" class="data-catalog-group-datasets" >
                      <button type="button" class="catalog-group-datasets-btn" (click)="selectDataset(i.idData)">
                        <span class="btn-text">{{i.maData}}</span>
                      </button>
                      <span class="btn-icon" (click)="addDataSentinelToMap(i.idData)">
                        <i class="fa-solid fa-circle-plus"></i>
                      </span>
                    </li>
                  </ul>
                </li>
                <li class="data-catalog-group">
                  <button type="button" class="catalog-group-btn" (click)="OpenCloseListData('landcover')">
                    <i *ngIf="!displayData['landcover']" class="fa-solid fa-folder-closed"></i>
                    <i *ngIf="displayData['landcover']" class="fa-solid fa-folder-open"></i>
                    <span class="btn-text">Land Cover</span>
                    <span class="btn-icon-folder">
                      <i class="fa-solid fa-caret-up" id="landcover-icon"></i>
                    </span>
                  </button>
                  <ul *ngIf="displayData['landcover']" class="catalog-group-datasets">
                    <li *ngFor="let i of this.list_landcover" class="data-catalog-group-datasets" >
                      <button type="button" class="catalog-group-datasets-btn" (click)="selectDataset(i.idData)">
                        <span class="btn-text">{{i.maData}}</span>
                      </button>
                      <span *ngIf="!displayMinusIcon[i.idData]" class="btn-icon" (click)="addDataLandCoverToMap(i.idData)">
                        <i class="fa-solid fa-circle-plus"></i>
                      </span>
                      <span *ngIf="displayMinusIcon[i.idData]" class="btn-icon" (click)="removeDetails(i.tenData)">
                        <i  class="fa-solid fa-circle-minus" ></i>
                      </span>
                    </li>
                  </ul>
                </li>
              </ul>
              <ul *ngIf="openSearchList" class="catalog-group">
                <li class="data-catalog-group">
                  <ul class="catalog-group-datasets">
                    <li *ngFor="let i of this.list_search_data" class="data-catalog-group-datasets" >
                      <button type="button" class="catalog-group-datasets-btn" (click)="selectDataset(i.idData)">
                        <span class="btn-text">{{i.maData}}</span>
                      </button>
                      <span *ngIf="!displayMinusIcon[i.idData]" class="btn-icon" (click)="addDatasetToMap(i.idData)">
                        <i  class="fa-solid fa-circle-plus"></i>
                      </span>
                      <span *ngIf="displayMinusIcon[i.idData]" class="btn-icon">
                        <i  class="fa-solid fa-circle-minus" ></i>
                      </span>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md-8">
          <perfect-scrollbar class="scrollbar">
            <div *ngIf="!openPreview" class="data-catalogue-empty">
              <div class="empty-container">
                <p>Select dataset name in folders to see a preview</p>
                <p style="display: flex; align-items: center; justify-content: center;">
                  <span>Click</span>
                  <i style="margin-right: 5px; margin-left: 5px; color: #0263c4;" class="fa-solid fa-circle-plus"></i>
                  <span>to add datasets to map</span>
                </p>
                <p style="display: flex; align-items: center; justify-content: center;">
                  <span>If dataset added. Click</span>
                  <i style="margin-right: 5px; margin-left: 5px; color: #0263c4;" class="fa-solid fa-circle-minus"></i>
                  <span>to remove dataset from map</span>
                </p>
              </div>
            </div>
            <div *ngIf="openPreview" class="data-catalogue-details">
              <div>
                <div class="preview-map">
                  <app-preview-map></app-preview-map>
                </div>
                <div class="preview-info">
                  <div class="preview-name">
                    <h3>{{lsd.maData}}</h3>
                    <p>Code name: {{lsd.tenData}}</p>
                  </div>
                  <div class="preview-details">
                    <div class="box-sc">
                      <button class="btn-description" (click)="OpenClosePreviewInfo('description')">
                        <i class="fa-solid fa-caret-down" id="description-icon" style="margin-right: 10px;"></i>
                        <span class="">Layer Description</span>
                      </button>
                      <div class="group-description" *ngIf="!displayData['description']">
                        <p class="text-description">{{lsd.description1}}</p>
                        <p class="text-description">{{lsd.description2}}</p>
                        <p class="text-description">{{lsd.description3}}</p>
                      </div>
                    </div>
                    <div class="box-sc">
                      <button class="btn-description" (click)="OpenClosePreviewInfo('contact')">
                        <i class="fa-solid fa-caret-down" id="contact-icon" style="margin-right: 10px;"></i>
                        <span class="">Service Description</span>
                      </button>
                      <div class="group-description" *ngIf="!displayData['contact']">
                        <div class="box-table-service">
                          <table class="service-desciption-table">
                            <tbody>
                              <tr>
                                <th>Tên Service</th>
                                <td>{{lsd.tenService}}</td>
                              </tr>
                              <tr>
                                <th>Title Service</th>
                                <td>{{lsd.titleService}}</td>
                              </tr>
                              <tr>
                                <th>Địa điểm</th>
                                <td>
                                  <table class="service-td-table">
                                    <tbody>
                                      <tr>
                                        <th>Địa chỉ</th>
                                        <td>{{lsd.diaChi}}</td>
                                      </tr>
                                      <tr>
                                        <th>Quốc gia</th>
                                        <td>{{lsd.quocGia}}</td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </td>
                              </tr>
                              <tr>
                                <th>Số lớp</th>
                                <td>{{lsd.soLop}}</td>
                              </tr>
                              <tr>
                                <th>Chiều dài tối đa</th>
                                <td>{{lsd.maxChieuDai}}</td>
                              </tr>
                              <tr>
                                <th>Chiều rộng tối đa</th>
                                <td>{{lsd.maxChieuRong}}</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                    <div class="box-sc">
                      <button class="btn-description" (click)="OpenClosePreviewInfo('url')">
                        <i class="fa-solid fa-caret-down" id="url-icon" style="margin-right: 10px;"></i>
                        <span class="">Dimension Description</span>
                      </button>
                      <div class="group-description" *ngIf="!displayData['url']">
                        <div class="box-table-service">
                          <table class="service-desciption-table">
                            <tbody>
                              <tr>
                                <th>Loại Vệ tinh</th>
                                <td>{{lsd.loaiVeTinh}}</td>
                              </tr>
                              <tr>
                                <th>Kinh độ</th>
                                <td>
                                  <table class="service-td-table">
                                    <tbody>
                                      <tr>
                                        <th>Kinh độ tây</th>
                                        <td>{{lsd.kinhDo_Tay}}</td>
                                      </tr>
                                      <tr>
                                        <th>Kinh độ đông</th>
                                        <td>{{lsd.kinhDo_Dong}}</td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </td>
                              </tr>
                              <tr>
                                <th>Vĩ độ</th>
                                <td>
                                  <table class="service-td-table">
                                    <tbody>
                                      <tr>
                                        <th>Vĩ độ bắc</th>
                                        <td>{{lsd.viDo_Bac}}</td>
                                      </tr>
                                      <tr>
                                        <th>Vĩ độ Nam</th>
                                        <td>{{lsd.viDo_Nam}}</td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </td>
                              </tr>
                              <tr>
                                <th>Ngày mặc định hiển thị</th>
                                <td>{{lsd.defaultDate | date: 'dd/MM/YYYY'}}</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </perfect-scrollbar>
        </div>
      </div>
    </div>
  </div>
</div>

<app-data-details
  *ngIf="openDetails"
  [lst_choosen]="this._dataCatalogueService.choosen_lst"
  (idDataSelected)="selectDataset($event)"
  (typeDataSelected)="OpenCloseListData($event)"
  (openCatalogue)="openDataCatalogue($event)"
  (closeDetails)="closeDataDetails($event)"
  >
</app-data-details>
